<div class="col-lg-12">
  <div id="total-feature-completeness-errors"></div>
  <table id="table_id" class="display">
    <thead>
      <tr>
        <th>Status</th>
        <th>Name</th>
        <th>Date</th>
        <th>Comment</th>
      </tr>
    </thead>
    <tbody>
    </tbody>
  </table>
</div>

<!-- <table id='feature-attribute-completeness-errors-table'>
  <thead>
    <tr>
      <th>Status</th>
      <th>Name</th>
      <th>Date</th>
      <th>Comment</th>
    </tr>
  </thead>
  <tbody>
    {% for error in errors %}
    <tr>
      <td>{{ error['status'] }}</td>
      <td><a href="{{ error['name'] }}" target="_blank">{{ error['name'] }}</td>
      <td>{{ error['date'] }}</td>
      <td>{{ error['comment'] }}</td>
    </tr>
    {% endfor %}
  </tbody>
</table> -->

<script type="text/javascript">
  


  function renderErrorsWarnings() {
    var dataTable = $('#table_id').DataTable({
      columns: [
        {"data": "status"},
        {"data": "name"},
        {"data": "date"},
        {"data": "comment"}
      ]
    });
    var errorsFilesCount = {{ feature_completeness['errors_files_count']}};
    var totalErrors = 0;

    for (var i = 1; i <= errorsFilesCount; i++) {
      var errorsUrl = "{{ url | safe }}" + '/errors_' + i + '.json';
      $.ajax({
        url: errorsUrl,
        dataType: 'json',
        success: function(data) {
          totalErrors += data.length;
          $('#total-feature-completeness-errors').html(totalErrors);
          dataTable.rows.add(data).draw();
        }
      });
    }
  }

  renderErrorsWarnings();
</script>